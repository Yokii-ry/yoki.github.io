(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1448:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n(0),o=n.n(r),a=n(3),c=n.n(a),i=n(1),l=n.n(i),u=n(1451),s=n.n(u);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function p(e,t){if(null==e)return{};var n=y(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function y(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function g(e){var t=w();return function n(){var r=j(e),o;if(t){var a=j(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return O(this,o)}}function O(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){d(n,e);var t=g(n);function n(){var e;m(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return _(E(e=t.call.apply(t,[this].concat(o))),"prefix","code-popup"),e}return h(n,[{key:"render",value:function e(){var t=this.props,n=t.footer,r=t.children,a=p(t,["footer","children"]);return o.a.createElement(i.Overlay.Popup,a,o.a.createElement("div",{className:this.prefix},o.a.createElement("div",{className:"".concat(this.prefix,"-body")},r),n?o.a.createElement("div",{className:"".concat(this.prefix,"-footer")},n):null))}}]),n}(o.a.Component);_(S,"propTypes",{footer:c.a.node})},1449:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),o=n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function f(e){var t=m();return function n(){var r=b(e),o;if(t){var a=b(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return p(this,o)}}function p(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return function(t){u(r,t);var n=f(r);function r(){var e;c(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return h(y(e=n.call.apply(n,[this].concat(o))),"state",{show:!1}),e}return l(r,[{key:"componentDidMount",value:function e(){var t=this;setTimeout((function(){t.setState({show:!0})}),300)}},{key:"render",value:function t(){var n;return this.state.show?o.a.createElement(e,this.props):null}}]),r}(o.a.Component)}},1450:function(e,t,n){},1451:function(e,t,n){},1468:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1420),c=n.n(a),i=n(1449),l=n(1450),u=n.n(l);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n=y(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function y(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function g(e){var t=w();return function n(){var r=j(e),o;if(t){var a=j(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return O(this,o)}}function O(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var _=function(e){d(n,e);var t=g(n);function n(){return m(this,n),t.apply(this,arguments)}return h(n,[{key:"render",value:function e(){var t=[1,2,3,4],n=this.props,r=n.className,a=p(n,["className"]);return o.a.createElement("div",f({className:"at-list project-content-list"},a),t.map((function(e){return o.a.createElement("div",{className:"skeleton-list-item mr ".concat(r),key:e},o.a.createElement("div",{className:"skeleton-list-item-img skeleton-wapper"},o.a.createElement(c.a,{width:32,height:32})),o.a.createElement("div",{className:"skeleton-list-item-left"},o.a.createElement("div",{className:"skeleton-list-item-left-title skeleton-wapper"},o.a.createElement(c.a,{width:150,height:20})),o.a.createElement("div",{className:"skeleton-list-item-left-desc skeleton-wapper"},o.a.createElement(c.a,{width:300,height:16}))),o.a.createElement("div",{className:"skeleton-list-item-right skeleton-wapper"},o.a.createElement(c.a,{width:100,height:16})))})))}}]),n}(o.a.PureComponent);t.a=Object(i.a)(_)},1640:function(e,t,n){},1641:function(e,t,n){},1642:function(e,t,n){},1643:function(e,t,n){},1701:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(3),c=n.n(a),i=n(65),l=n(32),u=n(1),s=n(4),f=n(1468),p=n(1420),y=n.n(p),m=n(1449),b=n(1450);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var n=g(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function g(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function S(e){var t=C();return function n(){var r=k(e),o;if(t){var a=k(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return P(this,o)}}function P(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var x=function(e){j(n,e);var t=S(n);function n(){return O(this,n),t.apply(this,arguments)}return w(n,[{key:"render",value:function e(){var t=[1,2,3,4],n=this.props,r=n.className,a=v(n,["className"]);return o.a.createElement("div",d({className:"at-list project-content-list"},a),t.map((function(e){return o.a.createElement("div",{className:"skeleton-list-item ul ".concat(r),key:e},o.a.createElement(y.a,{width:140,height:16}))})))}}]),n}(o.a.PureComponent),N=Object(m.a)(x),I=n(6),T=n(20),B=n.n(T),A=n(8),z=n(30),D=n(1448),F=n(31),L=n.n(F);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),e}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}function X(e,t){return(X=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function V(e){var t=Q();return function n(){var r=Z(e),o;if(t){var a=Z(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return G(this,o)}}function G(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=u.DatePicker.RangePicker,ee={labelCol:{span:6},wrapperCol:{fixedSpan:12}},te=[{label:"\u6210\u529f",value:"SUCCESS"},{label:"\u8fd0\u884c\u4e2d",value:"RUNNING"},{label:"\u5931\u8d25",value:"FAIL"},{label:"\u5df2\u53d6\u6d88",value:"CANCELED"},{label:"\u7b49\u5f85\u4e2d",value:"WAITING"}],ne=function(e){q(n,e);var t=V(n);function n(e){var r;return Y(this,n),W(J(r=t.call(this,e)),"setFormInit",(function(){r.field.setValues({status:"",start_time:null,end_time:null,extern_uids:[],range:null}),r.setState({authorData:[]})})),W(J(r),"onSearchResult",(function(){r.field.validate((function(e){if(!e){var t=r.field.getValues();t.extern_uids&&(t.extern_uids=t.extern_uids.join(",")),t.range&&(t.start_time=L()(t.range[0]).format("YYYY-MM-DD HH:mm:ss"),t.end_time=L()(t.range[1]).format("YYYY-MM-DD HH:mm:ss"),delete t.range);var n=r.props.branch_name;n&&(t.branch_name=n),r.props.setAdvancedSearch(t)}}))})),W(J(r),"onResetClick",(function(){r.setFormInit(),r.onSearchResult()})),W(J(r),"onRangePickerOk",(function(){r.onSearchResult()})),W(J(r),"onBranchChange",(function(e){r.field.setValue("branch_name",e),r.onSearchResult()})),W(J(r),"onStatusChange",(function(e){r.field.setValue("status",e),r.onSearchResult()})),W(J(r),"onAuthorChange",(function(e){r.setState({authorData:e}),r.field.setValue("extern_uids",e.map((function(e){return e._userId}))),r.onSearchResult()})),r.field=new u.Field(J(r)),r.state={authorData:[]},r}return U(n,[{key:"render",value:function e(){var t=this,n=this.field.init;return r.createElement(D.a,{trigger:r.createElement(u.Button.Icon,{name:"filter",type:"primary",color:"gray"}),triggerType:"click",align:"tr br",footer:r.createElement(u.Form.Item,{style:{marginBottom:"0px"}},r.createElement(u.Form.Reset,{text:!0,type:"primary",style:{border:0},onClick:this.onResetClick,toDefault:!0,className:"advanced-search-form-btn"},r.createElement(A.a,{type:"trashbin"})," \u6e05\u9664\u6240\u6709\u7b5b\u9009\u6761\u4ef6"))},r.createElement(u.Form,M({},ee,{labelTextAlign:"left",field:this.field}),r.createElement(u.Form.Item,M({label:"\u8fd0\u884c\u72b6\u6001"},ee),r.createElement(u.Select,M({},n("status",{initValue:""}),{followTrigger:!0,onChange:this.onStatusChange}),te.map((function(e){return r.createElement(u.Select.Option,{value:e.value},e.label)})))),r.createElement(u.Form.Item,{label:"\u8fd0\u884c\u4eba"},r.createElement(z.a,{onChange:function e(n){t.onAuthorChange(n)},value:this.state.authorData,multiple:!0})),r.createElement(u.Form.Item,{label:"\u8fd0\u884c\u65f6\u95f4",style:{marginBottom:0}},r.createElement($,M({},n("range"),{followTrigger:!0,popupAlign:"tr br",onOk:this.onRangePickerOk,format:"YYYY-MM-DD HH:mm:ss"})))))}}]),n}(r.Component),re=n(161),oe=n(23),ae=n(9),ce=n(7);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t,n){return t&&se(e.prototype,t),n&&se(e,n),e}function pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}function ye(e,t){return(ye=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function me(e){var t=de();return function n(){var r=ve(e),o;if(t){var a=ve(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return be(this,o)}}function be(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?he(e):t}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oe="Repo-Pipeline",Ee=function(e){pe(n,e);var t=me(n);function n(){var e;ue(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return ge(he(e=t.call.apply(t,[this].concat(o))),"goFlow",(function(){var t=window.FORCE,n=t.pathResource,r=t.resourceSubject,o=e.props,a=o.projectInfo,c=o.isInitialize,i={type:"codeup",template:{id:n.id,gitHttpURL:a.http_url_to_repo,branch:ce.b.revisionEncodeURI(r.revision)}},l="https://".concat(ae.d?"pre-":"","flow.aliyun.com/my/new?sourceTpl=").concat(btoa(JSON.stringify(i)));window.open(l),Object(I.b)({action:"creat_pipeline",page:Oe,type:c?"initialize":""})})),e}return fe(n,[{key:"render",value:function e(){var t=this.props.btnText,n=void 0===t?"\u65b0\u5efa\u6d41\u6c34\u7ebf":t;return o.a.createElement(u.Button,le({type:"primary",onClick:this.goFlow},this.props),this.props.text?o.a.createElement(A.a,{type:"plus-o-fill"}):null,n)}}]),n}(o.a.Component);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t,n){return t&&_e(e.prototype,t),n&&_e(e,n),e}function Pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}function Re(e,t){return(Re=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function Ce(e){var t=Ne();return function n(){var r=Ie(e),o;if(t){var a=Ie(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return ke(this,o)}}function ke(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?xe(e):t}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ne(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var Te=function(e){Pe(n,e);var t=Ce(n);function n(){return je(this,n),t.apply(this,arguments)}return Se(n,[{key:"render",value:function e(){var t=this.props,n=t.title,r=t.icon,a=t.iconBgColor,c=void 0===a?"#80808054":a,i={background:c},l="#80808054"===c?{color:"#80808054"}:{};return o.a.createElement("div",{className:"flow-tips"},o.a.createElement("span",{className:"flow-tips-icon",style:i},r),o.a.createElement("span",{className:"flow-tips-text",style:l},n))}}]),n}(r.PureComponent),Be=n(11);function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){return t&&De(e.prototype,t),n&&De(e,n),e}function Le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}function Ke(e,t){return(Ke=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function Me(e){var t=Ue();return function n(){var r=qe(e),o;if(t){var a=qe(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return Ye(this,o)}}function Ye(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?He(e):t}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ve=new Array(7).fill(0),Ge=function(e){Le(n,e);var t=Me(n);function n(e){var r;return ze(this,n),Xe(He(r=t.call(this,e)),"onClick",(function(){var e=window.FORCE.pathResource;Object(Be.d)("/".concat(e.fullPath))})),Xe(He(r),"showAliyun",(function(){r.setState({visible:!0})})),Xe(He(r),"hideAliyun",(function(){r.setState({visible:!1})})),r.state={visible:!1},r}return Fe(n,[{key:"render",value:function e(){var t=this.props,n=t.projectInfo,r=t.isEmptyProject,a=this.state.visible;return r?o.a.createElement("div",{className:"empty-mr"},o.a.createElement(oe.a,{size:"middle",title:o.a.createElement("div",null,"\u4e91\u6548\u6d41\u6c34\u7ebf\u63d0\u4f9b\u7075\u6d3b\u6613\u7528\u7684\u6301\u7eed\u96c6\u6210\u3001\u6301\u7eed\u9a8c\u8bc1\u3001 \u6301\u7eed\u53d1\u5e03\u529f\u80fd\uff0c\u52a9\u4f60\u9ad8\u8d28\u91cf\u3001\u9ad8\u6548\u7387\u7684\u4ea4\u4ed8\u4e1a\u52a1\uff0c",o.a.createElement("br",null),"\u7acb\u5373\u521d\u59cb\u5316\u5f00\u59cb\u4f7f\u7528\u5427"),className:"empty-mr-placeholder",btns:[o.a.createElement(u.Button,{type:"primary",onClick:this.onClick},"\u521d\u59cb\u5316\u4ed3\u5e93")],image:"https://img.alicdn.com/tfs/TB1QAcwukT2gK0jSZFkXXcIQFXa-456-412.png"})):o.a.createElement("div",{className:"empty-flow"},o.a.createElement("h3",{className:"empty-flow-title"},"\u521b\u5efa\u6d41\u6c34\u7ebf\uff0c\u4f53\u9a8c\u4ee5\u4e0b\u670d\u52a1"),o.a.createElement(Ee,{className:"empty-flow-btn",projectInfo:n,isInitialize:!0,btnText:"\u521b\u5efa\u6d41\u6c34\u7ebf"}),o.a.createElement("div",{className:"empty-flow-tips-outer"},o.a.createElement(Te,{title:"\u6d4b\u8bd5\u4e2d...",icon:o.a.createElement("span",null,"?")}),o.a.createElement(Te,{title:"\u6d4b\u8bd5\u4e2d...",icon:o.a.createElement("span",null,"?")}),o.a.createElement(Te,{title:"\u6d4b\u8bd5\u4e2d...",icon:o.a.createElement("span",null,"?")}),o.a.createElement("div",{style:{width:"36px"}}),o.a.createElement(Te,{title:"ACR\u6784\u5efa",icon:o.a.createElement(u.Icon,{type:"aliyun"}),iconBgColor:"#ff6a00"}),o.a.createElement(Te,{title:"ACK\u53d1\u5e03",icon:o.a.createElement(u.Icon,{type:"aliyun"}),iconBgColor:"#ff6a00"}),o.a.createElement(Te,{title:"ECS\u53d1\u5e03",icon:o.a.createElement(u.Icon,{type:"aliyun"}),iconBgColor:"#ff6a00"})),o.a.createElement("img",{className:"empty-flow-pipeline",src:"https://img.alicdn.com/imgextra/i1/O1CN01JAwgrw1fgzZgI1Q8E_!!6000000004037-2-tps-480-480.png",alt:"\u6d41\u6c34\u7ebf"}),o.a.createElement("div",{className:"empty-flow-circles"},Ve.map((function(){return o.a.createElement("div",{className:"empty-flow-circles-circle"})}))),o.a.createElement("div",{className:"empty-flow-bottom-line"},o.a.createElement("span",{style:{width:"300px"}},"\u8d28\u91cf/\u5b89\u5168\u6d4b\u8bd5"),o.a.createElement("span",{style:{width:"120px"}},"\u6784\u5efa"),o.a.createElement("span",{style:{flex:1}},o.a.createElement("span",{style:{marginRight:"4px"}},"\u963f\u91cc\u4e91/\u66f4\u591a\u8d44\u6e90\u53d1\u5e03"),o.a.createElement(u.Icon,{type:"question-o-fill",className:"empty-flow-bottom-line-question",onMouseOver:this.showAliyun,onMouseLeave:this.hideAliyun}))),o.a.createElement("div",{className:"empty-flow-question-modal-outer",style:{visibility:a?"visible":"hidden"},onMouseOver:this.showAliyun,onMouseLeave:this.hideAliyun},o.a.createElement("div",{className:"empty-flow-question-modal"},o.a.createElement("div",{className:"empty-flow-question-modal-title"},o.a.createElement("img",{src:"https://img.alicdn.com/tfs/TB13DzOjXP7gK0jSZFjXXc5aXXa-212-48.png",height:16})),o.a.createElement("div",{className:"empty-flow-question-modal-content"},o.a.createElement("span",null,"\u4e91\u670d\u52a1\u5668\uff08ECS\uff09\u53d1\u5e03"),o.a.createElement("span",null,"Kubernetes \u53d1\u5e03"),o.a.createElement("span",null,"\u8d44\u6e90\u7f16\u6392\u670d\u52a1\uff08ROS\uff09\u53d1\u5e03"),o.a.createElement("span",null,"Severless\uff08SAE\uff09\u53d1\u5e03"),o.a.createElement("span",null,"...")),o.a.createElement("div",{className:"empty-flow-question-modal-more"},"\u66f4\u591a\u8d44\u6e90"))))}}]),n}(o.a.PureComponent),Je=n(14),Qe=n(2),Ze=n(166),We=n.n(Ze),$e=n(1640);function et(e){return ot(e)||rt(e)||nt(e)||tt()}function tt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nt(e,t){if(e){if("string"==typeof e)return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(e,t):void 0}}function rt(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ot(e){if(Array.isArray(e))return at(e)}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ct=u.Balloon.Tooltip,it={init:"\u672a\u8fd0\u884c",running:"\u8fd0\u884c\u4e2d",waiting:"\u7b49\u5f85\u4e2d",success:"\u8fd0\u884c\u6210\u529f",fail:"\u8fd0\u884c\u5931\u8d25",canceled:"\u5df2\u53d6\u6d88",cancelling:"\u53d6\u6d88\u4e2d"},lt,ut=function e(t){var n=t.groups,r=void 0===n?[]:n,a="pipe-history";if(0===r.length)return o.a.createElement(Ge,null);var c=r.length-1-r.slice().reverse().findIndex((function(e){return"init"!==e.status.toLowerCase()})),i=4,l=Math.max(0,c-1),u=c+3,s=r.slice(l,u);if(s.length<4){var f=r.slice(Math.max(0,l-(4-s.length)),l);if(s.unshift.apply(s,et(f)),s.length<4){var p=r.slice(u,u+(4-s.length));s.push.apply(s,et(p))}}return o.a.createElement("div",{className:a},s.map((function(e,t){var n="FINISH"===e.status?e.resultStatus.toLowerCase():e.status.toLowerCase(),a=o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"title"},e.name),o.a.createElement("div",{className:"point"}));return o.a.createElement("div",{key:"".concat(e.name,"-").concat(t),className:["group-status","group-status-".concat(n," ").concat(c===e.idx?"active":""),"".concat(r.length>e.idx+1&&3===t?"has-more":"")].join(" ")},o.a.createElement(ct,{type:"primary",trigger:a,align:"t",offset:[0,20],popupProps:{delay:200}},e.name,": ",it[n]))})))};function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pt(e,t){if(null==e)return{};var n=yt(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yt(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dt(e,t,n){return t&&ht(e.prototype,t),n&&ht(e,n),e}function vt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}function gt(e,t){return(gt=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function Ot(e){var t=jt();return function n(){var r=_t(e),o;if(t){var a=_t(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return Et(this,o)}}function Et(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?wt(e):t}function wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var St=function(e){vt(n,e);var t=Ot(n);function n(){return bt(this,n),t.apply(this,arguments)}return dt(n,[{key:"shouldComponentUpdate",value:function e(t){return t.type!==this.props.type}},{key:"render",value:function e(){var t=u.Icon.createFromIconfont({scriptUrl:"//at.alicdn.com/t/font_1310450_o2c24topjh.js",symbolPrefix:"at-"});return o.a.createElement(t,this.props)}}]),n}(r.Component),Pt,Rt=function(e){vt(n,e);var t=Ot(n);function n(){var e;bt(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return mt(wt(e=t.call.apply(t,[this].concat(o))),"getType",(function(e){return"aliyunGit"===e||"giteeGit"===e?e.replace("Git",""):"force"===e?"git":"gitSample"===e||"flow"===e?"flow-":"jenkins"===e?"jenkins":"githubOAuth"===e?"github":"customGitlab"===e?"gitlab":e})),e}return dt(n,[{key:"shouldComponentUpdate",value:function e(t){return t.type!==this.props.type}},{key:"render",value:function e(){var t=u.Icon.createFromIconfont({scriptUrl:"//at.alicdn.com/t/font_1312825_330egul3q5r.js",symbolPrefix:"pl-"}),n=this.props,r=n.type,a=pt(n,["type"]);return o.a.createElement(t,ft({type:this.getType(r)},a))}}]),n}(r.Component),Ct=n(1641),kt=u.Balloon.Tooltip,xt={waiting:{label:"\u7b49\u5f85\u4e2d",icon:o.a.createElement(Rt,{type:"hold-o-fill",size:"small"})},canceled:{label:"\u5df2\u53d6\u6d88",icon:o.a.createElement(Rt,{type:"failed-o-fill",size:"small"})},cancelled:{label:"\u5df2\u53d6\u6d88",icon:o.a.createElement(Rt,{type:"failed-o-fill",size:"small"})},cancel:{label:"\u5df2\u53d6\u6d88",icon:o.a.createElement(Rt,{type:"failed-o-fill",size:"small"})},finish:{label:"\u5df2\u5b8c\u6210",icon:o.a.createElement(Rt,{type:"success-o-fill",size:"small"})},success:{label:"\u8fd0\u884c\u6210\u529f",icon:o.a.createElement(Rt,{type:"success-o-fill",size:"small"})},running:{label:"\u8fd0\u884c\u4e2d",icon:o.a.createElement(Rt,{type:"loading-o-fill",size:"small"})},cancelling:{label:"\u53d6\u6d88\u4e2d",icon:o.a.createElement(Rt,{type:"loading-o-fill",size:"small"})},fail:{label:"\u8fd0\u884c\u5931\u8d25",icon:o.a.createElement(Rt,{type:"failed-o-fill",size:"small"})},pause:{label:"\u6682\u505c\u4e2d",icon:o.a.createElement(Rt,{type:"pause-o-fill",size:"small"})},init:{label:"\u7b49\u5f85\u4e2d",icon:o.a.createElement(Rt,{type:"hold-o-fill",size:"small"})},ready:{label:"\u7b49\u5f85\u4e2d",icon:o.a.createElement(Rt,{type:"hold-o-fill",size:"small"})},skip:{label:"\u5df2\u8df3\u8fc7",icon:o.a.createElement(Rt,{type:"success-o-fill",size:"small"})},default:{label:status,icon:o.a.createElement(u.Icon,{type:"question-o",size:"small"})},dormant:{label:"\u672a\u6267\u884c",icon:o.a.createElement(Rt,{type:"failed-o-fill",size:"small"})}},Nt=function e(t,n,r){return"CANCELED"===r&&"INIT"===t?"dormant":(("FINISH"===t?n:t)||"default").toLowerCase();var o},It=function e(t){var n=t.status,r=void 0===n?"":n,a=t.resultStatus,c=void 0===a?"":a,i=t.withIcon,l=void 0!==i&&i,u=Nt(r,c),s=xt[u.toLowerCase()]||xt.default;return o.a.createElement("div",{className:"inst-status-label inst-status-label-".concat(u)},l&&o.a.createElement(Bt,{status:u}),s.label)},Tt=function e(t){var n=t.status,r=void 0===n?"":n,a=t.resultStatus,c,i=Nt(r,void 0===a?"":a);return o.a.createElement(Bt,{status:i})},Bt=function e(t){var n=t.status,r=xt[n.toLowerCase()]||xt.default;return o.a.createElement("div",{className:"inst-status-icon inst-status-icon-".concat(n.toLowerCase())},o.a.createElement(kt,{type:"primary",align:"t",trigger:r.icon,popupProps:{delay:800}},r.label))},At=function e(t){var n=t.status,r;return(xt[n.toLowerCase()]||xt.default).icon},zt=Bt,Dt=n(1642),Ft,Lt=function e(t){var n=t.number,r=t.status,a=void 0===r?"":r,c=t.resultStatus,i=void 0===c?"":c,l=t.statusName,u=t.size,s=void 0===u?"default":u,f=t.pipeline_id,p=t.pipeline_name;if(n&&a){var y=Nt(a,i);return o.a.createElement("ul",{className:"instance-status instance-status-".concat(s," instance-status-").concat(y)},o.a.createElement("li",null,o.a.createElement("a",{href:"https://flow.aliyun.com/pipelines/".concat(f,"/builds/").concat(n),target:"_blank"},p?"".concat(p," "):"","#",n)),o.a.createElement("li",null,"-"),o.a.createElement("li",null,o.a.createElement(Tt,{status:a,resultStatus:i})),o.a.createElement("li",null,l))}return o.a.createElement(Ge,null)};function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){en(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ht(){return(Ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xt(e,t,n){return t&&qt(e.prototype,t),n&&qt(e,n),e}function Vt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}function Gt(e,t){return(Gt=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function Jt(e){var t=Wt();return function n(){var r=$t(e),o;if(t){var a=$t(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return Qt(this,o)}}function Qt(e,t){return!t||"object"!==Kt(t)&&"function"!=typeof t?Zt(e):t}function Zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function $t(e){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function en(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tn=u.Tag.Colorable,nn=window.FORCE.pathResource,rn=nn.defaultBranch,on=Qe.a.getOSKeyMap(),an=on.ctrlKey,cn=on.ctrlTxt,ln="Repo-Pipeline",un=[{value:o.a.createElement("span",null,"\u6d41\u6c34\u7ebf"),key:"pipeline"},{value:o.a.createElement("span",null,"\u5206\u652f\u6982\u51b5"),key:"branch"}],sn=function(e){Vt(n,e);var t=Jt(n);function n(e){var r;return Ut(this,n),en(Zt(r=t.call(this,e)),"fetchBranches",(function(){r.setState({branches_loading:!0}),s.a.fetch({api:"projects.all.branches.search",params:{id:nn.id}}).then((function(e){var t=e.filter((function(e){return e.name===rn}));t.length&&(t[0].tag=o.a.createElement(tn,{size:"small",color:"gray"},"\u9ed8\u8ba4\u5206\u652f"));var n=e.filter((function(e){return e.name&&e.name!==rn}));r.setState({branches:t.concat(n),branches_loading:!1})}))})),en(Zt(r),"handleKeyCodeEvent",(function(e){e[an]&&e.keyCode===Je.a.SPLIT&&r.searchRef.getInstance().open()})),en(Zt(r),"onSearch",(function(e){Object(I.b)({action:"search_mr",page:ln}),r.props.setSearch(e)})),en(Zt(r),"onPageNoChange",(function(e){r.props.getPipelines(e)})),en(Zt(r),"onTabKeySelectChange",(function(e){r.props.setTabKey(e,!0),"branch"===e?r.props.getPipelines(1,"isBranch",{branch_name:rn}):r.props.getPipelines(1),Object(I.b)({action:"view_".concat(e,"_overview"),page:ln})})),en(Zt(r),"onNavClick",(function(e){r.setState({checked_branch_name:e}),r.props.getPipelines(1,"isBranch",{branch_name:e})})),en(Zt(r),"renderList",(function(){var e=r.props,t=e.pipelines,n=e.total,a=e.isLoading,c=e.currentPage,i=e.tabKey;return o.a.createElement(o.a.Fragment,null,a?o.a.createElement(f.a,{style:{flex:1}}):o.a.createElement("div",{className:"pipeline-table",style:{flex:1}},o.a.createElement(I.a,{page:ln}),o.a.createElement(u.Table,{dataSource:t,hasBorder:!1,emptyContent:o.a.createElement("div",{className:"nopipeline-text"},"\u6682\u65e0\u6d41\u6c34\u7ebf\u6267\u884c\u8bb0\u5f55"),loading:a},"pipeline"===i?o.a.createElement(u.Table.Column,{title:"\u6d41\u6c34\u7ebf\u540d\u79f0",dataIndex:"pipeline_name",className:"pipeline-title-col",cell:function e(t,n,r){var a=r.pipeline_id,c=r.pipeline_name;return o.a.createElement("a",{href:"https://flow.aliyun.com/pipelines/".concat(a,"/current"),target:"_blank"},c)}}):null,o.a.createElement(u.Table.Column,{title:"\u6700\u8fd1\u8fd0\u884c\u72b6\u6001",dataIndex:"build_status",cell:function e(t,n,r){var a=r.pipeline_name,c=r.pipeline_id,l=r.build_id,u=r.build_status,s=r.flow_inst,f;return s?s.status&&o.a.createElement(Lt,{number:l,status:s.runningStatus,resultStatus:u,pipeline_name:"pipeline"===i?"":a,pipeline_id:c}):"-"}}),o.a.createElement(u.Table.Column,{title:"\u6700\u8fd1\u8fd0\u884c\u9636\u6bb5",dataIndex:"flow_inst",className:"pipeline-step-col",style:{width:224,height:73},cell:function e(t,n,r){var a=r.flow_inst,c;return a?a.status&&o.a.createElement(ut,{groups:a&&a.groups}):"-"}}),o.a.createElement(u.Table.Column,{title:"\u8fd0\u884c\u4eba",dataIndex:"creator",className:"pipeline-owner-col",cell:function e(t){return t?o.a.createElement(u.Balloon.Tooltip,{type:"primary",align:"tl",trigger:o.a.createElement("span",{className:"text-avatar-outer"},o.a.createElement(We.a,{text:t.username,sliceLength:"2",size:"xs",image:t.avatar_url,style:{marginRight:4},needAddedText:!0}))},t.username):"-"}}),o.a.createElement(u.Table.Column,{title:"\u8fd0\u884c\u65f6\u95f4",dataIndex:"gmt_create",className:"pipeline-time-col",cell:function e(t,n,r){return r.flow_inst?ce.b.getBeautyTime(t):"-"}})),o.a.createElement(u.Pagination,{className:"build-pipeline-list-footer",onChange:r.onPageNoChange,current:c,total:n,pageSize:20,showJump:!1,hideOnlyOnePage:!0})))})),r.onSearch=B()(r.onSearch,500),r.state={branches:[],branches_loading:!0,checked_branch_name:rn},r}return Xt(n,[{key:"componentDidMount",value:function e(){this.props.getPipelines(1,"isDidMount"),Object(I.d)(ln,{sendPerf:!1}),document.addEventListener("keydown",this.handleKeyCodeEvent),this.fetchBranches()}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("keydown",this.handleKeyCodeEvent)}},{key:"render",value:function e(){var t=this,n=this.state,r=n.branches,a=n.checked_branch_name,c=n.branches_loading,i=this.props,l=i.tabKey,s=i.pipelines,f=i.projectInfo,p=i.isLoading,y=i.isDidMount,m,b;return"true"===i.pageInfo.pathResource.isEmpty?o.a.createElement(Ge,{projectInfo:f,isEmptyProject:!0}):p||"isDidMount"!==y||s.length?o.a.createElement("div",{className:"project-content"},o.a.createElement(u.Tab,{style:{padding:"20px 0",marginBottom:20},onChange:this.onTabKeySelectChange,activeKey:l,shape:"capsule",extra:o.a.createElement("div",{className:"tab-extra-bar"},o.a.createElement(u.Search.Icon,{direction:"rtl",placeholder:"\u641c\u7d22\u6d41\u6c34\u7ebf",onChange:function e(n){t.onSearch(n)},defaultValue:this.props.search,className:"tab-extra-bar-item",triggerTooltipProps:{children:o.a.createElement("div",null,"\u641c\u7d22",o.a.createElement("br",null),cn," + /"),align:"t"},ref:function e(n){t.searchRef=n}}),o.a.createElement(ne,Ht({needBranch:"branch"===l,branch_name:a},this.props)),o.a.createElement(Ee,{text:!0,projectInfo:f,style:{marginLeft:12}}))},un.map((function(e){return o.a.createElement(u.Tab.Item,{title:e.value,key:e.key,badge:e.badge})}))),o.a.createElement("div",{className:"project-pipeline-tab-outer"},"branch"===l?o.a.createElement("div",{className:"project-pipeline-nav"},c?o.a.createElement(N,null):o.a.createElement(u.Nav,{defaultSelectedKeys:["master"],onItemClick:this.onNavClick},r.map((function(e){return o.a.createElement(u.Nav.Item,{key:e.name},o.a.createElement("div",{style:{lineHeight:"24px"}},e.name,e.tag?e.tag:null))})))):null,this.renderList())):o.a.createElement(Ge,{projectInfo:f})}}]),n}(r.Component);en(sn,"propTypes",{tabKey:c.a.string,orderKey:c.a.string,pipelines:c.a.arrayOf(c.a.object),currentPage:c.a.number,totalData:c.a.number,getPipelines:c.a.func,setSearch:c.a.func,setTabKey:c.a.func,setOrderKey:c.a.func});var fn=Object(i.connect)((function(e){return Yt(Yt({},e.project.projectPipeline),{},{pageInfo:e.root.pageInfo,projectInfo:e.project.root.projectInfo})}),(function(e){return Object(l.bindActionCreators)(re,e)}))(sn),pn=n(1643),yn=t.default=fn}}]);