(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{1468:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1420),c=n.n(a),i=n(1449),l=n(1450),u=n.n(l);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n=y(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function y(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function v(e){var t=j();return function n(){var r=w(e),o;if(t){var a=w(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return O(this,o)}}function O(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var R=function(e){h(n,e);var t=v(n);function n(){return m(this,n),t.apply(this,arguments)}return d(n,[{key:"render",value:function e(){var t=[1,2,3,4],n=this.props,r=n.className,a=f(n,["className"]);return o.a.createElement("div",p({className:"at-list project-content-list"},a),t.map((function(e){return o.a.createElement("div",{className:"skeleton-list-item mr ".concat(r),key:e},o.a.createElement("div",{className:"skeleton-list-item-img skeleton-wapper"},o.a.createElement(c.a,{width:32,height:32})),o.a.createElement("div",{className:"skeleton-list-item-left"},o.a.createElement("div",{className:"skeleton-list-item-left-title skeleton-wapper"},o.a.createElement(c.a,{width:150,height:20})),o.a.createElement("div",{className:"skeleton-list-item-left-desc skeleton-wapper"},o.a.createElement(c.a,{width:300,height:16}))),o.a.createElement("div",{className:"skeleton-list-item-right skeleton-wapper"},o.a.createElement(c.a,{width:100,height:16})))})))}}]),n}(o.a.PureComponent);t.a=Object(i.a)(R)},1604:function(e,t,n){},1742:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(3),c=n.n(a),i=n(65),l=n(32),u=n(1),s=n(2),p=n(5),f=n(1468),y=n(1470),m=n(6),b=n(23),d=n(165),h=n(20),g=n.n(h),v=n(1482),O=n(67),E=n(72),j=n(1458),w=n(104),R=n(11);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),e}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function T(e){var t=I();return function n(){var r=B(e),o;if(t){var a=B(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return K(this,o)}}function K(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){M(n,e);var t=T(n);function n(){var e;k(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return x(N(e=t.call.apply(t,[this].concat(o))),"onClick",(function(){var e=window.FORCE.pathResource;Object(R.d)("/".concat(e.fullPath))})),e}return _(n,[{key:"render",value:function e(){return o.a.createElement("div",{className:"empty-mr"},o.a.createElement(b.a,{size:"middle",title:o.a.createElement("div",null,"\u4f60\u548c\u540c\u4f34\u53ef\u4ee5\u901a\u8fc7\u5408\u5e76\u8bf7\u6c42\u9ad8\u6548\u7684\u8fdb\u884c\u4ee3\u7801\u8bc4\u5ba1\u548c\u53d8\u66f4\u8ba8\u8bba\uff0c",o.a.createElement("br",null),"\u4fdd\u8bc1\u4ee3\u7801\u5408\u5e76\u8d28\u91cf\uff0c\u5feb\u6765\u8bd5\u8bd5\u5427"),className:"empty-mr-placeholder",btns:[o.a.createElement(u.Button,{type:"primary",onClick:this.onClick},"\u521d\u59cb\u5316\u4ed3\u5e93")],image:"https://img.alicdn.com/tfs/TB1PRyAyrY1gK0jSZTEXXXDQVXa-558-476.png"}))}}]),n}(o.a.PureComponent),L=n(9),q=n(14),A=n(7),F=n(8),Z=n(13);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t,n){return t&&W(e.prototype,t),n&&W(e,n),e}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}function Y(e,t){return(Y=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function H(e){var t=te();return function n(){var r=ne(e),o;if(t){var a=ne(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return $(this,o)}}function $(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?ee(e):t}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe=s.a.getOSKeyMap(),ae=oe.ctrlKey,ce=oe.ctrlTxt,ie=window.FORCE.pathResource,le=function(e){Q(n,e);var t=H(n);function n(e){var r;V(this,n),re(ee(r=t.call(this,e)),"handleKeyCodeEvent",(function(e){e[ae]&&e.keyCode===q.a.SPLIT&&r.searchRef.getInstance().open()})),re(ee(r),"onSearch",(function(e){Object(m.b)({action:"search_mr",page:"Repo-MRs"}),r.props.setSearch(e)})),re(ee(r),"onOrderKeySelect",(function(e){r.props.setOrderKey(e.toString())})),re(ee(r),"onTabKeySelectChange",(function(e){r.props.setTabKey(e),r.props.setResetList(!0)})),re(ee(r),"getTotal",(function(e){var t;return r.props.totalData[e]})),re(ee(r),"renderTip",(function(){return o.a.createElement("div",{className:"mr-git-repo-tip"},o.a.createElement(F.a,{type:"intelligence",biz:"code",className:"tip-icon"}),o.a.createElement("span",null,"Tip\uff1a\u60f3\u8981\u521b\u5efa\u4ee3\u7801\u8bc4\u5ba1\u5c31\u50cf\u6267\u884c git push \u4e00\u6837\u7b80\u5355\uff1f\u8bd5\u8bd5"),"\xa0\xa0",o.a.createElement("a",{href:Object(Z.a)("agit-flow"),target:"_blank",onClick:function e(){Object(m.b)({action:"click_agit_flow",page:"Repo-MR",type:"",control:""})}},"AGit-Flow"))})),re(ee(r),"renderEmpty",(function(){var e=r.props.search,t=ie.role,n,a="false"===ie.isArchive&&s.g.includes(t);return o.a.createElement("div",{style:{marginTop:a?-40:0}},o.a.createElement(b.a,{type:"project",className:"no-btns",imgType:e?"org-list-search-empty":"org-list-empty",content:e?"":"\u6682\u65e0\u5408\u5e76\u8bf7\u6c42\u8bb0\u5f55",description:e?"\u641c\u7d22\u65e0\u7ed3\u679c":"\u53d1\u8d77\u5408\u5e76\u8bf7\u6c42\uff0c\u4fdd\u969c\u4ee3\u7801\u8d28\u91cf\uff0c\u5c55\u5f00\u4ee3\u7801\u534f\u4f5c\u5427"}))})),re(ee(r),"renderList",(function(){var e=r.props,t=e.mergeRequests,n=e.isLoading,a=e.currentPage,c=e.totalData,i=e.tabKey,l=e.projectInfo;return o.a.createElement(o.a.Fragment,null,n?o.a.createElement(f.a,null):o.a.createElement("div",null,0===t.length?r.renderEmpty():o.a.createElement(d.default,{className:"project-content-list project-mr-list",pagination:{onLoadMore:function e(t){r.props.getMergeRequests(t)},hasMore:a*s.i<c[i],useWindow:!1,getScrollParent:function e(){return document.querySelector("#container")}}},t.map((function(e){return o.a.createElement(y.a,{codeReview:e,projectInfo:l})}))),o.a.createElement(m.a,{page:"Repo-MRs"})))})),r.onSearch=g()(r.onSearch,500);var a=A.b.getUrlSearchParam("create_mr");return r.state={createMr:a||!1},a?r.props.setOpenMrModal(!0):r.props.setOpenMrModal(!1),r}return G(n,[{key:"componentDidMount",value:function e(){this.props.setInitList(!0),Object(m.d)("Repo-MRs",{sendPerf:!1}),document.addEventListener("keydown",this.handleKeyCodeEvent)}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("keydown",this.handleKeyCodeEvent)}},{key:"render",value:function e(){var t=this,n=this.props,r=n.tabKey,a=n.orderKey,c=n.pageInfo,i=ie.role,l=ie.isArchive,f=[{value:o.a.createElement("span",null,"\u5df2\u5f00\u542f"),key:"opened",badge:o.a.createElement(u.Badge,{count:this.getTotal("opened"),showZero:!0})},{value:o.a.createElement("span",null,"\u5df2\u5408\u5e76"),key:"merged",badge:o.a.createElement(u.Badge,{count:this.getTotal("merged"),showZero:!0})},{value:o.a.createElement("span",null,"\u5df2\u5173\u95ed"),key:"closed",badge:o.a.createElement(u.Badge,{count:this.getTotal("closed"),showZero:!0})},{value:o.a.createElement("span",null,"\u5168\u90e8"),key:"all",badge:o.a.createElement(u.Badge,{count:this.getTotal("all"),showZero:!0})}];if("true"===c.pathResource.isEmpty)return o.a.createElement(D,null);var y=this.state.createMr,b="false"===l&&s.g.includes(i);return o.a.createElement("div",{className:"project-content"},y&&o.a.createElement(O.a,U({cannotChangeProject:!0,defaultProjectId:window.FORCE.pathResource.id,isModalOpen:y,onCloseModal:function e(){t.setState({createMr:!1}),t.props.setOpenMrModal(!1)}},this.props)),o.a.createElement(u.Tab,{style:{padding:"20px 0"},className:"mr-tab",onChange:this.onTabKeySelectChange,activeKey:r,shape:"capsule",extra:o.a.createElement("div",{className:"tab-extra-bar"},o.a.createElement(u.Search.Icon,{direction:"rtl",placeholder:p.a.projects_cr_search,onChange:function e(n){t.onSearch(n)},defaultValue:this.props.search,className:"tab-extra-bar-item",triggerTooltipProps:{children:o.a.createElement("div",null,"\u641c\u7d22",o.a.createElement("br",null),ce," + /"),align:"t"},ref:function e(n){t.searchRef=n}}),o.a.createElement(v.a,U({},this.props,{addr:"pmr"})),o.a.createElement(u.Dropdown,{trigger:o.a.createElement(u.Button.Icon,{name:"sort",type:"primary",color:"gray",className:"tab-extra-bar-item"}),triggerType:"click",align:"tr br"},o.a.createElement(u.Menu,{onSelect:this.onOrderKeySelect,selectMode:"single",selectedKeys:a},o.a.createElement(u.Menu.Item,{key:"updated_at",onClick:function e(){Object(m.b)({action:"sort_by_update",page:"Repo-MRs"})}},"\u66f4\u65b0\u65f6\u95f4"),o.a.createElement(u.Menu.Item,{key:"created_at",onClick:function e(){Object(m.b)({action:"sort_by_create",page:"Repo-MRs"})}},"\u521b\u5efa\u65f6\u95f4"))),"false"===l?o.a.createElement(j.a,{neededRole:s.g,role:i},L.a?o.a.createElement(E.a,U({cannotChangeProject:!0,defaultProjectId:window.FORCE.pathResource.id,trigger:o.a.createElement(u.Button,{type:"primary",onClick:function e(){Object(m.b)({action:"new_mr",page:"Repo-MRs"})}},"\u65b0\u5efa\u5408\u5e76\u8bf7\u6c42")},this.props)):o.a.createElement(u.Button,{type:"primary",onClick:function e(){Object(m.b)({action:"new_mr",page:"Repo-MRs"}),t.setState({createMr:!0}),t.props.setOpenMrModal(!0)}},"\u65b0\u5efa\u5408\u5e76\u8bf7\u6c42")):null)},f.map((function(e){return o.a.createElement(u.Tab.Item,{title:e.value,key:e.key,badge:e.badge})}))),b&&this.renderTip(),this.renderList())}}]),n}(r.Component);re(le,"propTypes",{tabKey:c.a.string,orderKey:c.a.string,mergeRequests:c.a.arrayOf(c.a.object),currentPage:c.a.number,totalData:c.a.number,getMergeRequests:c.a.func,setSearch:c.a.func,setTabKey:c.a.func,setOrderKey:c.a.func});var ue=Object(i.connect)((function(e){return J(J({},e.project.projectMergeRequest),{},{pageInfo:e.root.pageInfo,projectInfo:e.project.root.projectInfo})}),(function(e){return Object(l.bindActionCreators)(w,e)}))(le),se=n(1604),pe=t.default=ue}}]);